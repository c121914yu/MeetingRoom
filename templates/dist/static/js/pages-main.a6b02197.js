(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-main","pages-AddTodo"],{"0c2b":function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,'.Add[data-v-2d348582]{width:60px;height:60px;position:fixed;right:1%;bottom:3%;z-index:999}.Task[data-v-2d348582]{width:95%;margin:10px auto}.TaskList[data-v-2d348582]{border-radius:10px;-webkit-box-shadow:2px 2px 2px #b1b1b1;box-shadow:2px 2px 2px #b1b1b1;margin:10px 0}.Todos[data-v-2d348582]{color:#f4f4f4;background:#16a77e}.Completed[data-v-2d348582]{color:#505050;background:#fff}.TaskList .end-time[data-v-2d348582]{width:94%;min-height:30px;border-bottom:1px solid hsla(0,0%,82.4%,.5);margin:0 auto;padding:10px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative}.TaskList .end-time .time[data-v-2d348582]{margin-left:10px}.TaskList .end-time .detail[data-v-2d348582]{position:absolute;right:10px}.Todos .end-time .detail[data-v-2d348582]{color:#eeeb5d;-webkit-animation:rotate-data-v-2d348582 2s infinite linear;animation:rotate-data-v-2d348582 2s infinite linear}.Completed .end-time .detail[data-v-2d348582]{color:#01907f}@-webkit-keyframes rotate-data-v-2d348582{0%{-webkit-transform:scale(1) rotate(0)}10%{-webkit-transform:scale(.9)}30%,50%,70%,90%{-webkit-transform:scale(1.1) rotate(5deg)}40%,60%,80%{-webkit-transform:scale(1.1) rotate(-5deg)}to{-webkit-transform:scale(1) rotate(0)}}@keyframes rotate-data-v-2d348582{0%{-webkit-transform:scale(1) rotate(0)}10%{-webkit-transform:scale(.9)}30%,50%,70%,90%{-webkit-transform:scale(1.1) rotate(5deg)}40%,60%,80%{-webkit-transform:scale(1.1) rotate(-5deg)}to{-webkit-transform:scale(1) rotate(0)}}.TaskList .task[data-v-2d348582]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:10px 0}.TaskList .task .title[data-v-2d348582]{width:70%;margin-left:10px}.TaskList .task uni-image[data-v-2d348582]{width:25px;height:25px}.TaskList .task .delete[data-v-2d348582]{position:absolute;right:20px}.TaskList .task .sure[data-v-2d348582]{position:absolute;right:65px}\n\n/* 如果completede容器中有内容，加一条线 */.partition[data-v-2d348582]{content:"";width:60%;height:2px;background:#d8e5e0;margin-top:20px;margin-bottom:20px;margin-left:20%}',""])},1278:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".info[data-v-82cf7b8a]{width:90%;margin:0 auto;padding:10px 10px;border-bottom:1px solid #01907f}.info .remark[data-v-82cf7b8a]{color:grey}.info .time[data-v-82cf7b8a]{color:#353535}.title[data-v-82cf7b8a]{width:90%;margin:0 auto;padding:10px 0}.title uni-textarea[data-v-82cf7b8a]{border:1px solid #01907f;border-radius:5px;min-height:200px;margin-top:5px;padding-left:2px}.Btn[data-v-82cf7b8a]{margin:10px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.Btn uni-view[data-v-82cf7b8a]{width:50%;text-align:center}.Btn uni-text[data-v-82cf7b8a]{color:hsla(0,0%,68.2%,.6)}",""])},"1f80":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"TodoList",style:"padding-top:"+t.navheight},[a("v-uni-view",{staticClass:"Task"},t._l(t.Tasks,function(e,i){return e.completed?t._e():a("v-uni-view",{key:i,staticClass:"TaskList Todos"},[a("v-uni-view",{staticClass:"end-time"},[a("v-uni-text",{staticClass:"time"},[t._v(t._s(e.EndingTime))]),a("v-uni-text",{staticClass:"detail",on:{click:function(a){a=t.$handleEvent(a),t.setTask(e,"change")}}},[t._v("详细")])],1),a("v-uni-view",{staticClass:"task"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(e.title))]),a("v-uni-image",{staticClass:"sure",attrs:{src:"../static/todos.png"},on:{click:function(a){a=t.$handleEvent(a),t.Sure(e,i)}}}),a("v-uni-image",{staticClass:"delete",attrs:{src:"../static/task/delete.png"},on:{click:function(a){a=t.$handleEvent(a),t.Remove(e.ID,i)}}})],1)],1)}),1),t.line()?a("div",{staticClass:"partition"}):t._e(),a("v-uni-view",{staticClass:"Task"},t._l(t.Tasks,function(e,i){return e.completed?a("v-uni-view",{key:i,staticClass:"TaskList Completed"},[a("v-uni-view",{staticClass:"end-time"},[a("v-uni-text",{staticClass:"time"},[t._v(t._s(e.EndingTime))]),a("v-uni-text",{staticClass:"detail",on:{click:function(a){a=t.$handleEvent(a),t.setTask(e,"change")}}},[t._v("详细")])],1),a("v-uni-view",{staticClass:"task"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(e.title))]),a("v-uni-image",{staticClass:"sure",attrs:{src:"../static/task/completed.png"},on:{click:function(a){a=t.$handleEvent(a),t.Sure(e,i)}}}),a("v-uni-image",{staticClass:"delete",attrs:{src:"../static/task/delete.png"},on:{click:function(a){a=t.$handleEvent(a),t.Remove(e.ID,i)}}})],1)],1):t._e()}),1),a("v-uni-image",{staticClass:"Add",attrs:{src:"../static/task/AddPlan.png"},on:{click:function(e){e=t.$handleEvent(e),t.setTask("Add")}}}),t.Add?a("v-uni-view",{staticClass:"mask"}):t._e(),t.Add?a("AddTodo",{attrs:{SetTask:t.SetTask,conditon:t.conditon},on:{Close:function(e){e=t.$handleEvent(e),t.Close(e)},SureAdd:function(e){e=t.$handleEvent(e),t.SureAdd(e)},SureChange:function(e){e=t.$handleEvent(e),t.SureChange(e)}}}):t._e()],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},"3ad9":function(t,e,a){"use strict";var i=a("8882"),n=a.n(i);n.a},5148:function(t,e,a){"use strict";a.r(e);var i=a("c624"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},5167:function(t,e,a){"use strict";var i=a("aa09"),n=a.n(i);n.a},8882:function(t,e,a){var i=a("0c2b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("23c0d4de",i,!0,{sourceMap:!1,shadowMode:!1})},9233:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"popup"},[a("v-uni-view",{staticClass:"info"},[a("v-uni-input",{staticClass:"content",attrs:{type:"text",placeholder:"输入任务标题"},model:{value:t.SetTask.title,callback:function(e){t.$set(t.SetTask,"title",e)},expression:"SetTask.title"}})],1),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",[""===t.SetTask.EndingTime?a("v-uni-picker",{staticClass:"remark",attrs:{mode:"date",start:t.startDate,end:t.endDate},on:{change:function(e){e=t.$handleEvent(e),t.SetDate(e)}}},[a("v-uni-view",[t._v("选择截止时间")])],1):a("v-uni-picker",{staticClass:"time",attrs:{mode:"date",value:t.dateVal,start:t.startDate,end:t.endDate},on:{change:function(e){e=t.$handleEvent(e),t.SetDate(e)}}},[a("v-uni-view",[t._v(t._s(t.SetTask.EndingTime)+" 前完成")])],1)],1)],1),a("v-uni-view",{staticClass:"title"},[a("v-uni-text",[t._v("详细内容")]),a("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"输入任务详细内容"},model:{value:t.SetTask.detail,callback:function(e){t.$set(t.SetTask,"detail",e)},expression:"SetTask.detail"}})],1),a("v-uni-view",{staticClass:"Btn"},[a("v-uni-view",{staticStyle:{color:"#cd2d2d"},on:{click:function(e){e=t.$handleEvent(e),t.Close(e)}}},[t._v("取消")]),a("v-uni-text",[t._v("|")]),a("v-uni-view",{staticStyle:{color:"#088573"},on:{click:function(e){e=t.$handleEvent(e),t.Sure(e)}}},[t._v(t._s("Add"===t.conditon?"添加":"修改"))])],1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},aa09:function(t,e,a){var i=a("1278");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("6b5a8e83",i,!0,{sourceMap:!1,shadowMode:!1})},ad0a:function(t,e,a){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a481");var n={data:function(){var t=this.getToday();return{startDate:t,endDate:"2020-12-1"}},methods:{SetDate:function(t){var e=t.detail.value;e=e.replace(/-/g,"/"),this.SetTask.EndingTime=e},Sure:function(){var e=this;if(""===this.SetTask.title.title)this.showToast("请输入任务标题","../static/error.png");else if(""===this.SetTask.EndingTime.EndingTime)this.showToast("请选择截止时间","../static/error.png");else if("Add"===this.conditon){var a={title:this.SetTask.title,detail:this.SetTask.detail,EndingTime:this.SetTask.EndingTime,completed:0,email:t.userInfo.email};uni.showLoading({title:"添加中..."}),uni.request({url:"http://www.jinlongyuchitang.cn:3001/task/AddTask",method:"POST",data:a,success:function(t){a.ID=t.data,e.$emit("SureAdd",a)},fail:function(t){i.log(t)},complete:function(){uni.hideLoading()}})}else uni.showLoading({title:"修改中..."}),uni.request({url:"http://www.jinlongyuchitang.cn:3001/task/ChangeTask",method:"POST",data:this.SetTask,success:function(t){e.$emit("SureChange",e.SetTask)},fail:function(t){i.log(t)},complete:function(){uni.hideLoading()}})},Close:function(){this.$emit("Close",!1)},getToday:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=e+"-"+a+"-"+i;return n},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";uni.showToast({title:t,duration:1500,image:e})}},computed:{dateVal:function(){return this.SetTask?this.SetTask.EndingTime.replace(/\\|\//g,"-"):this.getToday()}},props:{SetTask:Object,conditon:String}};e.default=n}).call(this,a("c8ba"),a("5a52")["default"])},b237:function(t,e,a){"use strict";a.r(e);var i=a("ad0a"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,function(){return i[t]})}(s);e["default"]=n.a},c624:function(t,e,a){"use strict";(function(t,i){var n=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("7514");var s=n(a("cc16")),o={data:function(){return{navheight:t.systemInfo.statusBarHeight+"px",Add:!1,conditon:"Add",SetTask:{},Tasks:[]}},onLoad:function(){uni.showLoading({title:"获取中..."}),this.getUserInfo()},methods:{Sure:function(t,e){var a=this;uni.showModal({title:"提示",content:"确认改变任务状态?",success:function(n){if(n.confirm){uni.showLoading({title:"修改中..."});var s=!t.completed;uni.request({url:"http://www.jinlongyuchitang.cn:3001/task/TodoTask",method:"POST",data:{ID:t.ID,completed:s},success:function(t){200===t.statusCode&&(a.Tasks[e].completed=s,s?a.showToast("完成任务"):a.showToast("重新添加任务"))},fail:function(t){i.log(t)},complete:function(){uni.hideLoading()}})}}})},Remove:function(t,e){var a=this;uni.showModal({title:"提示",content:"确认删除任务?",success:function(n){n.confirm&&(uni.showLoading({title:"删除中..."}),uni.request({url:"http://www.jinlongyuchitang.cn:3001/task/RemoveTask",method:"POST",data:{ID:t},success:function(t){200===t.statusCode&&(a.Tasks.splice(e,1),a.showToast("删除成功"))},fail:function(t){i.log(t)},complete:function(){uni.hideLoading()}}))}})},setTask:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Add";this.conditon=e,"Add"===e?(this.SetTask={title:"",detail:"",EndingTime:""},this.Add=!0):(this.SetTask=t,this.Add=!0)},SureAdd:function(t){this.Tasks.push(t),this.Add=!1},SureChange:function(t){this.Tasks.find(function(e){return e.ID===t.ID&&(e=t),e.ID===t.ID}),this.Add=!1},Close:function(){this.Add=!1},getUserInfo:function(){var e=this;uni.getStorage({key:"userInfo",success:function(a){t.userInfo=a.data,uni.request({url:"http://www.jinlongyuchitang.cn:3001/task/GetTasks",method:"POST",data:a.data,success:function(t){e.Tasks=t.data},fail:function(t){i.log(t)},complete:function(){uni.hideLoading()}})}})},line:function(){var t=this.Tasks.filter(function(t){return 0==t.completed}),e=this.Tasks.length-t.length;return t.length>0&&e>0},showToast:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";uni.showToast({title:t,duration:1500,image:e})}},components:{AddTodo:s.default}};e.default=o}).call(this,a("c8ba"),a("5a52")["default"])},cc16:function(t,e,a){"use strict";a.r(e);var i=a("9233"),n=a("b237");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("5167");var o=a("2877"),d=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"82cf7b8a",null);e["default"]=d.exports},d0f0:function(t,e,a){"use strict";a.r(e);var i=a("1f80"),n=a("5148");for(var s in n)"default"!==s&&function(t){a.d(e,t,function(){return n[t]})}(s);a("3ad9");var o=a("2877"),d=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"2d348582",null);e["default"]=d.exports}}]);